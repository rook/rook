# Before creating this PVC and PV, make sure to create a static RBD image in the Ceph cluster.
#    rbd create static-image-abc --size 100G --pool replicapool
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: rbd-pvc-static
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 100Gi
  storageClassName: ""
  volumeName: rbd-static-pv-abc
---
apiVersion: v1
kind: PersistentVolume
metadata:
  name: rbd-static-pv-abc
spec:
  accessModes:
    - ReadWriteOnce
  capacity:
    storage: 100Gi
  csi:
    driver: rook-ceph.rbd.csi.ceph.com # csi-driver-name
    fsType: ext4
    nodeStageSecretRef:
      name: rook-csi-rbd-node
      namespace: rook-ceph # namespace:cluster
    volumeAttributes:
      "clusterID": "rook-ceph"
      "pool": "replicapool"
      "staticVolume": "true"
      "imageFeatures": "layering"

    # volumeHandle should be same as the rbd image name created from the toolbox
    volumeHandle: static-image-abc
  persistentVolumeReclaimPolicy: Retain
  volumeMode: Filesystem
